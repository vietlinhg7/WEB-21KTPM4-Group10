lấy ảnh xài cloudinary
npm install cloudinary

npm i multer multer-storage-cloudinary


grecaptcha
npm install axios


 request(verificationURL, async (err, response, body) => {
        if(err) {
            console.log(err);
            return res.status(500).json({
                success: false,
                msg: 'Internal Server Error',
            });
        }

        body = JSON.parse(body);
        console.log(body);

        if(!body.success) {
            return res.json({
                success: false,
                msg: 'Failed captcha verification',
            });
        }
        else{

            try {

                const images = req.files.map((file) => file.path);
        
                const uploadedImages = [];
        
                for(let image of images) {
                    const results = await cloudinary.uploader.upload(image);
                    uploadedImages.push({
                        url: results.secure_url,
                        publicId: results.secure_id,
                    });
                }
        
                const image1 = uploadedImages[0] ? uploadedImages[0].url : null;
                const image2 = uploadedImages[1] ? uploadedImages[1].url : null;
                
                await Report.create({
                    reportID,
                    reportType,
                    fullName,
                    email,
                    phone,
                    reportContent,
                    thoidiemgui: new Date(),
                    tinhtrang: "Chưa xử lí",
                    cachthucxuly: 'null',
                    queryID: currentBoardID,
                    image1,
                    image2
                });
        
            
                res.redirect('/');
                
            } catch (error) {
                res.send("Can not add report!");
                console.error(error);
            } 
        }
    });